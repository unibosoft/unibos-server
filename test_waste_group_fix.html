<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Group Fix Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .card {
            background: white;
            color: #333;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .problem {
            background: #fee2e2;
            border-left: 5px solid #ef4444;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .solution {
            background: #dbeafe;
            border-left: 5px solid #3b82f6;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .test-case {
            background: #f0fdf4;
            border-left: 5px solid #22c55e;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .code {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            border: 1px solid #ddd;
            margin: 10px 0;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        .example {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 15px 0;
        }
        .cards-visual {
            display: flex;
            gap: -10px;
        }
        .card-mini {
            width: 40px;
            height: 55px;
            background: white;
            border: 2px solid #333;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-left: -10px;
        }
        .card-mini:first-child {
            margin-left: 0;
        }
        .red { color: red; }
        .black { color: black; }
        .arrow {
            font-size: 24px;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <h1>â™ ï¸ Solitaire Waste Group Fix â™¥ï¸</h1>
    
    <div class="card">
        <h2>ğŸ› Ã–nceki Sorun</h2>
        
        <div class="problem">
            <strong>Problem:</strong> Waste'ten kart alÄ±ndÄ±ÄŸÄ±nda kalan kartlar kayÄ±yordu
            <div class="example">
                <span>Ã–nce (3 kart):</span>
                <div class="cards-visual">
                    <div class="card-mini black">5â™ </div>
                    <div class="card-mini red">Qâ™¥</div>
                    <div class="card-mini black">Aâ™£</div>
                </div>
                <span class="arrow">â†’</span>
                <span>Aâ™£ alÄ±ndÄ±:</span>
                <div class="cards-visual">
                    <div class="card-mini black">3â™¦</div>
                    <div class="card-mini black">5â™ </div>
                    <div class="card-mini red">Qâ™¥</div>
                </div>
                <span style="color: red;">âŒ YANLIÅ!</span>
            </div>
        </div>
    </div>
    
    <div class="card">
        <h2>âœ… Ã‡Ã¶zÃ¼m</h2>
        
        <div class="solution">
            <strong>DÃ¼zeltme:</strong> wasteGroupSize ile gÃ¶rÃ¼nen grup takip ediliyor
            <div class="example">
                <span>Ã–nce (3 kart):</span>
                <div class="cards-visual">
                    <div class="card-mini black">5â™ </div>
                    <div class="card-mini red">Qâ™¥</div>
                    <div class="card-mini black">Aâ™£</div>
                </div>
                <span class="arrow">â†’</span>
                <span>Aâ™£ alÄ±ndÄ±:</span>
                <div class="cards-visual">
                    <div class="card-mini black">5â™ </div>
                    <div class="card-mini red">Qâ™¥</div>
                </div>
                <span style="color: green;">âœ… DOÄRU!</span>
            </div>
        </div>
        
        <div class="code">
// Yeni sistem:
game.wasteGroupSize = 3;  // Stock'tan 3 kart Ã§ekildi

// Waste'ten kart alÄ±ndÄ±ÄŸÄ±nda:
game.waste.pop();
game.wasteGroupSize--;  // 3 â†’ 2

// Render'da:
const startIndex = game.waste.length - game.wasteGroupSize;
// Sadece son grup gÃ¶steriliyor, kayma yok!
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸ§ª Test SenaryolarÄ±</h2>
        
        <div class="test-case">
            <strong>Test 1: Normal 3'lÃ¼ Ã‡ekme</strong>
            <ol>
                <li>Stock'tan 3 kart Ã§ek</li>
                <li>Waste'te 3 kart gÃ¶rÃ¼nmeli (yayÄ±lmÄ±ÅŸ)</li>
                <li>En saÄŸdaki kartÄ± al</li>
                <li>âœ… Geriye 2 kart kalmalÄ±, kayma olmamalÄ±</li>
            </ol>
        </div>
        
        <div class="test-case">
            <strong>Test 2: SÄ±ralÄ± Kart Alma</strong>
            <ol>
                <li>Stock'tan 3 kart Ã§ek (A, B, C)</li>
                <li>C kartÄ±nÄ± al â†’ A, B kalmalÄ±</li>
                <li>B kartÄ±nÄ± al â†’ Sadece A kalmalÄ±</li>
                <li>A kartÄ±nÄ± al â†’ Waste boÅŸ</li>
                <li>âœ… Her adÄ±mda kayma olmamalÄ±</li>
            </ol>
        </div>
        
        <div class="test-case">
            <strong>Test 3: Yeni 3'lÃ¼ Ã‡ekme</strong>
            <ol>
                <li>Stock'tan 3 kart Ã§ek</li>
                <li>1 kart al (2 kaldÄ±)</li>
                <li>Stock'tan tekrar 3 kart Ã§ek</li>
                <li>âœ… Sadece yeni 3'lÃ¼ gÃ¶rÃ¼nmeli</li>
                <li>âœ… Eski 2 kart gÃ¶rÃ¼nmemeli (arkada saklÄ±)</li>
            </ol>
        </div>
        
        <div class="test-case">
            <strong>Test 4: Stock Reset</strong>
            <ol>
                <li>TÃ¼m stock'u bitir</li>
                <li>BoÅŸ stock'a tÄ±kla (reset)</li>
                <li>âœ… wasteGroupSize sÄ±fÄ±rlanmalÄ±</li>
                <li>Yeni Ã§ekiÅŸlerde dÃ¼zgÃ¼n Ã§alÄ±ÅŸmalÄ±</li>
            </ol>
        </div>
        
        <div class="test-case">
            <strong>Test 5: Undo ile Waste Group</strong>
            <ol>
                <li>3 kart Ã§ek, 1 tanesini al</li>
                <li>Undo yap</li>
                <li>âœ… 3 kart tekrar gÃ¶rÃ¼nmeli</li>
                <li>âœ… wasteGroupSize 3'e dÃ¶nmeli</li>
            </ol>
        </div>
    </div>
    
    <div class="card">
        <h2>ğŸ® Teste BaÅŸla</h2>
        <p>Solitaire oyununu aÃ§Ä±p waste kartlarÄ±nÄ±n davranÄ±ÅŸÄ±nÄ± test edin:</p>
        
        <button onclick="window.open('http://localhost:8000/solitaire/', '_blank')">
            ğŸƒ Solitaire'i AÃ§
        </button>
        
        <button onclick="showDetails()">
            ğŸ“‹ Teknik Detaylar
        </button>
    </div>
    
    <div class="card">
        <h2>ğŸ”§ YapÄ±lan DeÄŸiÅŸiklikler</h2>
        
        <ol>
            <li><strong>game.wasteGroupSize eklendi:</strong> GÃ¶rÃ¼nen grup boyutunu takip ediyor</li>
            <li><strong>Stock'tan Ã§ekiÅŸte:</strong> wasteGroupSize = Ã§ekilen kart sayÄ±sÄ±</li>
            <li><strong>Waste'ten kart alÄ±ndÄ±ÄŸÄ±nda:</strong> wasteGroupSize--</li>
            <li><strong>Stock reset'te:</strong> wasteGroupSize = 0</li>
            <li><strong>Render'da:</strong> Sadece son wasteGroupSize kadar kart gÃ¶steriliyor</li>
            <li><strong>Undo'da:</strong> wasteGroupSize da restore ediliyor</li>
        </ol>
    </div>
    
    <script>
        function showDetails() {
            alert(`
WASTE GROUP SÄ°STEMÄ°:

1. KLASIK SOLITAIRE DAVRANIÅI:
   - Stock'tan her seferinde 3 kart Ã§ekilir
   - Bu 3'lÃ¼ grup waste'te yayÄ±lmÄ±ÅŸ gÃ¶sterilir
   - Kart alÄ±nÄ±nca diÄŸerleri KAYMAĞ—
   - Yeni Ã§ekiÅŸte ESKÄ° kartlar gizlenir

2. wasteGroupSize TAKIBI:
   - Stock'tan Ã§ekiÅŸ: wasteGroupSize = 3
   - Kart alÄ±ndÄ±: wasteGroupSize--
   - Stock reset: wasteGroupSize = 0
   
3. RENDER MANTIÄI:
   - startIndex = waste.length - wasteGroupSize
   - Sadece [startIndex...end] arasÄ± gÃ¶sterilir
   - DiÄŸer kartlar arkada saklÄ± kalÄ±r

4. UNDO DESTEÄÄ°:
   - previousState'e wasteGroupSize dahil
   - Undo'da tam restore
            `);
        }
    </script>
</body>
</html>